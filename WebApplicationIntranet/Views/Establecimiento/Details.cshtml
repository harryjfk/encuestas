@model Entity.Establecimiento

@{
    ViewBag.Title = "Detalles del Establecimiento";
}
<div class="title-container-details">
    <h3 class="screen-title">Detalles del Establecimiento</h3>

    <a href="/Establecimiento/Index" class="btn btn-primary pull-right"><i class="glyphicon glyphicon-backward"></i> Regresar</a>

    <div class="info-child-screen-details">
        <div>
            <span class="bold">Raz&oacute;n Social: </span> <span>@Model.Nombre</span>
        </div>
        <div>
            <span class="bold">Ruc: </span> <span>@Model.Ruc</span>
        </div>
        <div>
            <span class="bold">Direcci&oacute;n: </span> <span>@Model.Direccion</span>
        </div>
        <div>
            <span class="bold">Departamento:</span>
            @{Html.RenderAction("GetNombreDepartamento", "Departamento", new { idDepartamento = Model.IdDepartamento });}
        </div>
        <div>
            <span class="bold">Provincia:</span>
            @{Html.RenderAction("GetNombreProvincia", "Provincia", new { idProvincia = Model.IdProvincia });}
        </div>
        <div>
            <span class="bold">Distrito:</span>
            @{Html.RenderAction("GetNombreDistrito", "Distrito", new { idDistrito = Model.IdDistrito });}
        </div>
        <div>
            <span class="bold">Tel&eacute;fono: </span> <span>@Model.Telefono</span>
        </div>
        <div>
            <span class="bold">Fax: </span> <span>@Model.Fax</span>
        </div>
        <div>
            <span class="bold">Observaciones: </span> <span>@Model.Observaciones</span>
        </div>
        <div>
            <span class="bold">Enviar Notificaciones: </span> <span>@Model.EnviarCorreo</span>
        </div>
        <div>
            <span class="bold">Activado: </span> <span>@Model.Activado</span>
        </div>
        <br /><br />
        <div>
            <span class="bold">CIIU: </span><br />
            <div style="width: 60%; height: 1px; border-bottom: 1px solid #ccc;"></div>
            @if (Model.Ciius.Select(t => t.Ciiu).Any())
            {
                foreach (var ciiu in Model.Ciius)
                {
                    <span class="label label-primary" title="@ciiu.Ciiu.Nombre">@ciiu.Ciiu.Codigo</span>
                }
            }
            else
            {
                <span>Sin Asignar</span>
            }
        </div>
        <br /><br />
        <div>
            <span class="bold">L&iacute;neas de Productos: </span><br />
            <div style="width: 60%; height: 1px; border-bottom: 1px solid #ccc;"></div>
            @if (Model.LineasProductoEstablecimiento.Any())
            {
                foreach (var ciiu in Model.LineasProductoEstablecimiento)
                {
                    <span class="label label-primary" title="">@string.Format("{0}", ciiu.LineaProducto.Nombre)</span>
                }
            }
            else
            {
                <span>Sin Asignar</span>
            }
        </div>
        <br /><br />
        <div>
            @{
                long idCont = 0;
                if (Model.ContactoPredeterminado != null)
                {
                    idCont = Model.ContactoPredeterminado.Id;
                }
            }
            <span class="bold">Contactos: </span><br />
            <div style="width: 60%; height: 1px; border-bottom: 1px solid #ccc;"></div>
            @if (Model.Contactos.Any())
            {
                if (Model.ContactoPredeterminado != null)
                {
                    <span class="label label-default" title="Predeterminado">@string.Format("{0}", Model.ContactoPredeterminado.Nombre)</span>
                }
                foreach (var ciiu in Model.Contactos.Where(t => t.Id != idCont))
                {
                    <span class="label label-primary" title="">@string.Format("{0}", ciiu.Nombre)</span>
                }
            }
            else
            {
                <span>Sin Asignar</span>
            }
        </div>
        <br /><br />
        <div>
            <span class="bold">Analistas: </span><br />
            <div style="width: 60%; height: 1px; border-bottom: 1px solid #ccc;"></div>
            @if (Model.CAT_ESTAB_ANALISTA.Any())
            {
                <table class="table table-striped table-hover table-bordered table-condensed tabla small">
                    <thead>
                        <tr class="cabecera">
                            <th> Nombre </th>
                            <th> CIIU </th>
                            <th> &Oacute;rden </th>
                        </tr>
                    </thead>
                    <tbody>
                        @foreach (var estAn in Model.CAT_ESTAB_ANALISTA.OrderBy(t=>t.orden))
                        {
                            <tr>
                                <td>
                                    <span>@estAn.SEG_USUARIO.Login</span>
                                </td>
                                <td>
                                    <span>@estAn.CAT_CIIU.ToString()</span>
                                </td>
                                <td>
                                    <span>@estAn.orden</span>
                                </td>

                            </tr>
                        }
                    </tbody>
                </table>
            }
            else
            {
                <span>Sin Asignar</span>
            }
        </div>
        <br /><br />
        <div>
            <span class="bold">Informante: </span><br />
            <div style="width: 60%; height: 1px; border-bottom: 1px solid #ccc;"></div>
            @if (Model.Informante != null)
            {
                <span>@Model.Informante.Login</span>
            }
            else
            {
                <span>Sin Asignar</span>
            }
        </div>
        <br /><br />
        <br /><br />
    </div>
</div>
